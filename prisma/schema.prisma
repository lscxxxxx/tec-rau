// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Bloco de configuração do banco de dados e do gerador do client
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

generator erd {
  provider = "prisma-erd-generator"
  output   = "./ERD.png"         
  theme    = "dark"              
}

enum Role {
  ADMIN
  SUPERADMIN
}

model Admin {
  id      Int    @id @default(autoincrement())
  usuario String
  email   String @unique
  senha   String
  role    Role   @default(ADMIN)

  @@map("admin")
}

model Curso {
  id    Int    @id @default(autoincrement())
  curso String
  
  trabalhos Trabalho[]

  @@map("curso")
}

model TipoTrabalho {
  id        Int    @id @default(autoincrement())
  descricao String

  trabalhos Trabalho[]

  @@map("tipotrabalho")
}

model PalavraChave {
  id Int @id @default(autoincrement())
  palavra String @unique
  trabalhos Trabalho[]
}

model Trabalho {
  id               Int      @id @default(autoincrement())
  titulo           String
  data             DateTime
  resumo           String
  status           StatusTrabalho
  arquivo          String
  autor1           String
  autor2           String?
  autor3           String?
  autor4           String?
  orientador       String
  coorientador     String?
  refbibliografica String

  tipoTrabalhoId   Int          @map("id_tipotrabalho")
  tipoTrabalho     TipoTrabalho @relation(fields: [tipoTrabalhoId], references: [id])

  cursoId          Int          @map("id_curso")
  curso            Curso        @relation(fields: [cursoId], references: [id])

  palavrasChave    PalavraChave[]

  @@map("trabalho")
}

enum StatusTrabalho {
  APROVADO
  REPROVADO
  PENDENTE
  PUBLICADO
}